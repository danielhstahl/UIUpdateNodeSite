"use strict";
var Complex=require('Complex'); //exportable class
var lgdCF=function( options){ //exposure, alpha, b, sigma, t, x0...dx=alpha(b-x)dt+sigma sqrt(x) dw
	this.l=options.exposure;
	this.lambda=options.alpha;
	this.theta=options.b;
	this.sigma=options.sigma;
	this.t=options.t;
	this.x0=options.x0;
}
lgdCF.prototype.execute=function(u){
	
	u=u.multiply(new Complex(this.l, 0));
	var uP=u.multiply(new Complex(-(.5*this.sigma*this.sigma/this.lambda)*(1.0-Math.exp(-this.lambda*this.t)), 0)).add(new Complex(1.0, 0));
	return u.multiply(new Complex(Math.exp(-this.lambda*this.t)*this.x0, 0)).divide(uP).exp().multiply(uP.power(-(2*this.lambda*this.theta)/(this.sigma*this.sigma)));
}
module.exports=lgdCF; //exportable class

